---
title: "Summaries of EDI-survey responses"
subtitle: "baseline version"
author: "Patrick Bolger"
date: now
date-format: "D MMM YYYY, h:mm a"
execute: 
  echo: false
format: 
  html:
    toc: true
    toc-title: Contents
    toc-depth: 5
    embed-resources: true
    code-fold: true
    code-summary: "Show the code"
    theme: cerulean
    mainfont: arvo
    page-layout: full
    fig-width: 11
    fig-height: 8
    fig_retina: 1
    smooth-scroll: true
    
editor: source
bibliography: grateful-refs-sumandvis.bib
csl: apa.csl
---

```{r turnWarningsOff}

options(warn=-1)

```



```{r getPackages}
#| output: false
#| warning: false
#| message: false

# List the packages needed for this file
neededPackages <- 
  c(
    "dplyr",
    "purrr",
    "tidyr",
    "forcats",
    "sysfonts",
    "showtext",
    "sjPlot",
    "sjlabelled",
    "sjmisc",
    "DT",
    "knitr",
    "gtsummary",
    "xfun",
    "stringr",
    "flextable",
    "renv",
    "ggplot2",
    "systemfonts",
    "magrittr",
    "ggtext",
    "colorblindcheck"
    )

# The code directly below installs R packages 
# Uncomment the code directly below if you 
# don't already have them installed.
#install.packages(neededPackages)

# The grateful package isn't available on CRAN, so it needs to be
# downloaded and installed directly from GitHub.
# Uncomment the code directly below in order to do so.
#install.packages("remotes"); library(remotes); remotes::install_github("Pakillo/grateful")

#Attach the packages
invisible(lapply(neededPackages, require, character.only=T))
library(grateful)

```


```{r getFontArvo}
#| output: false

## use *arvo* font throughout

## an active internet connection is required for this step

font_add_google("Arvo", "arvo")
showtext_auto()

```


```{r readTidiedData}
#| output: false

# source of data
# The data imported here was pre-processed in another *R* script.

# Read in the data that was saved as .rds output in tidyingAndFormatting.qmd
visMain <- readRDS("tidyLabeledSurveyData.rds")
              
```


```{r importCustomFunctions}

# This attaches custom themes and functions to reduce clutter and increase efficiency

source("themesAndFunctions.R")

```


# introduction

This report summarises the findings of a survey sent out to the *PsychoPy* community between 28 November 2022 and 16 March 2023. The topic was equity, diversity, and inclusion (EDI) in the *PsychoPy* community. 


::: {.callout-note title="Funding"}
The development of the survey was funded by a grant from the [Essential Open Source Software for Science](https://chanzuckerberg.com/eoss/) program at the [Chan-Zuckerberg Initiative](https://chanzuckerberg.com/), or CZI. Here is the [project page at CZI](https://chanzuckerberg.com/eoss/proposals/raising-diversity-and-internationalization-in-psychopy/).
:::

It was the first, baseline version, of two identical surveys to be sent out. The second will be sent out in 2024.

It was sent out as an *announcement* to the [PsychoPy User Forum](https://discourse.psychopy.org/) on the [Discourse platform](https://discourse.org/). It was also sent out by email to a list of authors generated through a cited-reference search on the [Web of Science](https://clarivate.com/products/scientific-and-academic-research/research-discovery-and-workflow-solutions/webofscience-platform/). Specifically, these authors published multiple research studies citing one or more papers authored (or co-authored) by Jonathan Peirce over the past two decades about *PsychoPy*.

The survey contained between 25-75 questions, depending on how participants responded. 

Responses were all anonymous. That is, nowhere do we have any record of who, exactly, replied to the survey.

There were three main parts to the survey:

- participant background\
- EDI experience\      
- guidance

*Participant background* asked participants about their career status, the degree to which they were engaged in the PsychoPy community, how they contributed to the project, and if there was anything that deterred them from contributing more than they already do.

Below are the full survey categories in more detail, roughly in order of the original presentation.

- Professional & *PsychoPy* background\
  - career status\
  - type of engagement with *PsychoPy*<sup>&reg;</sup>\
  - ways of contributing\
  - deterrents to contributing\
- EDI experience\
  - gender\
  - sexual orientation\
  - race and/or culture\
  - disability and/or neurodivergence\
  - language dominance\
- *PsychoPy* Guidance\
  - awareness of *Code of Conduct*\
  - findability, searchability, & accessibility of documentation\
  - trust in enforcement of *Code of Conduct*

<!-- We also  -->

<!-- ETHICS -->
<!-- FUNDING -->
<!-- SAMPLING FRAME -->
<!-- SAMPLE SIZE -->
<!-- APPROACH TO SURVEY DEVELOPMENT -->

## general



<!-- ***MORE WRITING ON DESCRIPTION*** -->

## original order of presentation

The original presentation of the survey begins with *professional and PsychoPy background* questions. It then proceeds to issues of equity, diversity, and inclusion (*EDI*) for respondents who indicated that they not only are part of a particular identity of interest, but also feel they have been affected somehow by having that identity in the *PsychoPy* community. The survey finished with a few questions about the *Code of Conduct* and *documentation*, which we will simply call *PsychoPy guidance*. Thus:

- *Professional and PsychoPy background*\
- *EDI experience*\
- *PsychoPy guidance*

Each participant saw the all of the *professional and PsychoPy background* items on the survey, as well as the *PsychoPy guidance* items. In the section on *EDI experience*, each respondent saw at least one of the questions, with the exception of *gender*, in which case everyone saw at least two. 

The one EDI questions that everyone saw had to do with whether they identified with, or was typically associated with, one of the EDI groups. In the case of *gender*, they simply indicated what their gender was, or if it was not listed.

If they answered *yes* to any particular EDI question (or any response for *gender*), two more questions appeared. The first invited them to supply more specific information about that particular aspect of their identity, but only if they wanted to. The second had to do with whether they felt that this particular aspect of their identity had affected their interactions in the *PsychoPy*<sup>&reg;</sup> community.

Importantly, this latter question determined whether participants saw a further eight questions regarding that particular identity. If they answered *yes*, they saw those questions a little bit later in the survey. If they answered *no*, they did not. 
This has an important implication. Namely, although one may identify or be associated with a particular identity, that does not necessarily mean that one feels that it had affected one's interactions in the *PsychoPy*<sup>&reg;</sup> community. Indeed, there were many participants throughout the survey who felt that althought they are associated with a particular identity, it had not affected their interactions.

Recall that for the dimension of *gender*, everyone saw the question concerning whether they felt that their interactions had suffered as a result of gender. This is because everyone has a gender identity, so there was no logical way of excluding anyone from seeing the subsequent community-interaction question.


## order of data summaries

Each of the headings in the list above above is depicted below with a visualisation, followed by a table of the data, and in the cases of identity, a table of labels that some participants optionally supplied to describe themselves on that particular EDI variable.

Ultimately however, it makes more sense to present the data summaries in a different order. Specifically, it would be informative to see how the background variables and related issues interact with the EDI variables. Therefore, the background and guidance variables are presented *after* the EDI variables, giving us a data-summary order as follows:

- *EDI experience*\
- *Professional & PsychoPy background*\
- *PsychoPy Guidance*

Each background and guidance variable is presented in isolation first, but then followed by each possible two-way interaction with the EDI variables of *gender*, *sexual orientation*, *race/culture*, *disability/neurodivergence*, and *written-English language dominance*. 

To the extent possible, each summary is available as a link in the sidebar. However, some interactions were grouped together and don't have links, *per se*. Most commonly, interactions with *gender* are linked, followed by interactions with *other EDI variables*.

Note that none of the questions required responses. This means that there will be plenty of non-responses in the summaries below. These are indicated as either *NA* or *missing*.

---

# data summaries

## participant EDI experience

The second group of items on the survey (again, presented first here) collected information about selected dimensions of equity, diversity, and inclusion, namely *gender*, *sexual orientation*, *race* and/or *culture*, *disability* and/or *neurodivergence*, and *language dominance*.

For each dimension, participants were asked if they identified with the dimension, or whether they thought that others would associate them with it, along with the optional opportunity to supply more information about their own specific identity along this dimension.

Crucially, they were also asked whether they felt that that identity or association had affected their interactions in the *PsychoPy*<sup>&reg;</sup> community. If they answered in the affirmative, they saw eight more questions related to this identity shortly thereafter in the survey.

Thus, the reader will notice that the sample sizes uniformly differ greatly between those who answered the background questions, and those who answered the eight further questions.

These eight further questions fell into three categories in the manner shown below:

- ***Treatment by others***\
  - *negative perception*\
  - *need to hide identity*\
  - *dismissiveness towards contributions*\
  - *target of derisive comments*\
  - *target of microaggressions*\
- ***Self-regard***\
  - *self-doubt*\
  - *stereotype threat*\
- ***Isolation***\
  - *a desire to interact with others more like themselves*
  
Participants could agree or disagree with each of these statements using a `1`-`7` Likert scale, where `1` indicated *Strongly disagree* and a `7` indicated *Strongly agree*.

::: {.callout-note}
Note that on the `1`-`7` scale for each of the statements, the number `4` is directly in the middle of the scale, which can be interpreted as neither agreeing nor disagreeing. You will see that we set responses of `4` to the side of the respective stacked frequency barplots, in yellow.

Also, the barplots are sorted within each category (*treatment*, *self-regard*, and *isolation*) along descending frequency of agreement. That is, the topmost barplot within each category is the one with highest number of agreements, whereas the bottommost barplot within each category is the one with the highest number of disagreements.
:::
  
Summaries of the responses to these statements are provided below after the respective questions concerning their identity.


### gender

The first EDI category is *gender*. We present the responses to the issue of identity, followed by a table of descriptions (supplied by some of the participants). This is followed by whether the participant felt affected in the *PsychoPy*<sup>&reg;</sup> community by that identity. Finally, we summarise the participants responses to items listed under *treatment* (by others), *self-regard*, and *isolation*. 


#### identity

The sections directly below summarise, both visually and verbally, the answer to the following question:

>`r get_label(visMain$gender)`

##### figure

```{r figGender}
#| label: gender-plot
#| fig-alt: "Barplot of responses to the following statement: 'Which gender do you identify most with?'"

visMain |> 
  select(gender) |> 
  mutate(gender = forcats::fct_na_value_to_level(gender, level = "(missing)")) |>
  ostFreqPlot(
    ostColour = ostBlue,
    sorting = "none"
  )

```

##### table

```{r tblGender}
#| label: gender-count-table
#| tbl-cap: "Summary of responses to gender."
#| output: asis

visMain |>
  select(gender) |>
  mutate(gender = forcats::fct_na_value_to_level(gender, level = "(missing)")) |>
  tbl_summary() |>
  modify_header(label = "**Question**") |>
  as_flex_table() |>
  flextable::flextable_to_rmd()

```



##### descriptions

If participants chose ***yes*** as an answer above, they were given the opportunity to describe their gender, though doing so was optional. For those who did, the table below lists the descriptions they provided. The "NA" in the table refers to those who either did not see the question or chose not to supply a description.

The question was as follows:

>`r get_label(visMain$genderDesc)`

```{r tblGenderDesc}
#| label: gender-desc-table
#| tbl-cap: Descriptions of gender identities volunteered by participants

visMain |> 
  count(genderDesc) |>
  arrange(desc(n)) |>
  datatable(
    class = 'cell-border stripe',
    colnames = c(
      "Feel free to describe your gender here (or not)",
      "count"
      ),
    options = list(
      columnDefs = list(
        list(
          targets = 1,
          render = JS(
            "function(data, type, row, meta) {",
            "return data === null ? 'NA' : data;",
            "}"
            )
          )
        )
      )
    )


```


---

#### felt affected

The sections directly below summarise, both visually and verbally, the answer to the following question:

>`r get_label(visMain$genderAffected)`

##### figure

```{r figGenderAffected}
#| label: gender-affected-plot
#| fig-alt: "Barplot of responses to: 'Do you feel that your gender status has affected your interactions with the PsychoPy community or software ecosystem?'"

visMain |> 
  select(genderAffected) |> 
  mutate(genderAffected = forcats::fct_na_value_to_level(genderAffected, level = "(missing)")) |>
  ostFreqPlot(
    ostColour = ostOrange,
    sorting = "none"
  )

```

##### table

```{r tblGenderAffected}
#| label: gender-felt-affected-count-table
#| tbl-cap: "Summary of responses to whether participants felt affected by their gender identity."
#| output: asis

visMain |>
  select(genderAffected) |>
  mutate(genderAffected = forcats::fct_na_value_to_level(genderAffected, level = "(missing)")) |>
  tbl_summary() |>
  modify_header(label = "**Question**") |>
  as_flex_table() |>
  flextable::flextable_to_rmd()

```

::: {.callout-important}
Important: The question directly above regarding gender determined whether or not the participant saw the respective items directly below regarding *treatment (by others)*, *self-regard*, and *isolation*.
:::

---

#### treatment, self-regard, isolation

The following statements were seen only by the subset of participants noted above. Specifically, they were restricted to the **`r numbers_to_words(length(which(visMain$genderAffected==1)))`** who replied ***yes*** to the question asking them whether they had felt that their gender identity has affected their interactions with the *PsychoPy*<sup>&reg;</sup> community. 

The exact questions are listed in the verbal summary after the visualisation.

##### figure

```{r figGenderLikert}
#| warning: false
#| label: gender-likert-plot
#| fig-alt: "Stacked frequency barplots of responses to several statements on gender, categorized into the following: treatment by others, self-regard, and isolation." 

visMain |> 
  select(genderNegPerc:genderOthersLikeMe) |> 
  stackedLikertGroups(likertTitle = "Gender")

```

##### table

```{r tblGenderLikert}
#| label: gender-stats-table
#| tbl-cap: "Statistics for responses to statements regarding gender"
#| output: asis

visMain |>
  select(genderNegPerc:genderOthersLikeMe) |>
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "7 = Strongly agree",
    byVar = NULL,
    spanVar <- NULL,
    footNote <- NULL
  )

```

<!-- #### [PROVISIONAL REMARKS] -->

<!-- -   This is a pretty small group, but something that stands out so far is that only one of them agreed with most of the statements, and there was only one statement where two of them agreed with it (*isolation*)\ -->
<!-- - Of course, the other surprising thing was that none of the participants who indicated that their gender was *not listed* indicated that they felt that their gender had affected their interactions in the *PsychoPy*<sup>&reg;</sup> community. Yet two people who identified as men and three who identified as women did. Note that we don't really have a way of determining what proportion of those four were transgender. -->

---


### sexual orientation

The second EDI category is *sexual orientation*. As above, we present the responses to the issue of identity, followed by a table of descriptions (supplied by some of the participants). This is followed by whether the participant felt affected in the *PsychoPy*<sup>&reg;</sup> community by that identity. Finally, we summarise the participants responses to items listed under *treatment* (by others), *self-regard*, and *isolation*. 


#### identity

##### figure

```{r figNonhetero}
#| label: nonhetero-plot
#| fig-alt: "Barplot of responses to the following: 'Do you, or might others who know you well, consider you somehow NOT to be part of the heterosexual community?'"

visMain |> 
  select(nonHeteroCommunity) |> 
  mutate(nonHeteroCommunity = forcats::fct_na_value_to_level(nonHeteroCommunity, level = "(missing)")) |>
  ostFreqPlot(
    ostColour = ostYellow,
    sorting = "none"
  )

```

##### table

```{r tblNonhetero}
#| label: sexuality-count-table
#| tbl-cap: "Summary of responses to sexual orientation"
#| output: asis

visMain |>
  select(nonHeteroCommunity) |>
  mutate(nonHeteroCommunity = forcats::fct_na_value_to_level(nonHeteroCommunity, level = "(missing)")) |>
  tbl_summary() |>
  modify_header(label = "**Question**") |>
  as_flex_table() |>
  flextable::flextable_to_rmd()

```

---

##### descriptions

If participants chose ***yes*** as an answer above, they were given the opportunity to describe their sexual identity, though doing so was optional. For those who did, the table below lists the descriptions they provided. The "NA" in the table refers to those who either did not see the question or chose not to supply a description.

The question was as follows:

>`r get_label(visMain$nonHeteroDesc)`

```{r tblNonheteroDesc}
#| label: nonhetero-desc-table
#| tbl-cap: "Descriptions of sexual orientation volunteered by participants"

visMain |> 
  count(nonHeteroDesc) |>
  arrange(desc(n)) |>
  datatable(
    class = 'cell-border stripe',
    colnames = c(
      "Feel free to describe your sexual orientation here (or not)",
      "count"
      ),
    options = list(
      columnDefs = list(
        list(
          targets = 1,
          render = JS(
            "function(data, type, row, meta) {",
            "return data === null ? 'NA' : data;",
            "}"
            )
          )
        )
      )
    )

```

---

#### felt affected

The sections directly below summarise, both visually and verbally, the answer to the following question:

>`r get_label(visMain$nonHeteroAffected)`

##### figure

```{r figNonheteroAffected}
#| label: nonhetero-affected-plot
#| fig-alt: "Barplot of responses to the following: 'Do you feel that your sexual orientation has affected your interactions with the PsychoPy community...?'"

visMain |> 
  select(nonHeteroAffected) |> 
  mutate(nonHeteroAffected = forcats::fct_na_value_to_level(nonHeteroAffected, level = "(missing)")) |>
  ostFreqPlot(
    ostColour = ostBlue,
    sorting = "none"
  )

```

##### table

```{r tblNonheteroAffected}
#| label: sexuality-felt-affected-count-table
#| tbl-cap: "Summary of responses to whether participants felt affected by their sexual orientation"
#| output: asis

visMain |>
  select(nonHeteroAffected) |>
  mutate(nonHeteroAffected = forcats::fct_na_value_to_level(nonHeteroAffected, level = "(missing)")) |>
  tbl_summary() |>
  modify_header(label = "**Question**") |>
  as_flex_table() |>
  flextable::flextable_to_rmd()

```

::: {.callout-important}
Important: The question directly above regarding sexual orientation determined whether or not the participant saw the respective items directly below regarding *treatment (by others)*, *self-regard*, and *isolation*.
:::

---

#### treatment, self-regard, isolation

The following statements were seen only by the subset of participants noted above. Specifically, they were restricted to the **`r numbers_to_words(length(which(visMain$nonHeteroAffected==1)))`** who replied ***yes*** to the question asking them whether they had felt that their sexual orientation has affected their interactions with the *PsychoPy*<sup>&reg;</sup> community.

The exact questions are listed in the verbal summary after the visualisation.

##### figure

```{r figNonheteroLikert}
#| warning: false
#| label: nonhetero-likert-plot
#| fig-alt: "Stacked frequency barplots of responses to several statements on sexuality, categorized into the following: treatment by others, self-regard, and isolation." 

visMain |>
  select(nonHeteroNegPerc:nonHeteroOthersLikeMe) |> 
  stackedLikertGroups(likertTitle = "Non-heterosexuality")

```

##### table

```{r tblNonheteroLikert}
#| label: nonhetero-stats-table
#| tbl-cap: "Statistics for responses to statements regarding sexual orientation"
#| output: asis

visMain |>
  select(nonHeteroNegPerc:nonHeteroOthersLikeMe) |>
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "7 = Strongly agree",
    byVar = NULL,
    spanVar <- NULL,
    footNote <- NULL
  )
  
```

<!-- #### [PROVISIONAL REMARKS] -->

<!-- -   Of the 36 people who indicated that they were associated with non-heterosexuality, only one thought it had affected their interactions with the *PsychoPy*<sup>&reg;</sup> community, and they mostly disagreed with negative treatment by others and disagreed with statements expressing low self-regard. They were neutral-ish on whether they'd like to see others more like them in the community. -->




---

### race / culture

The third EDI category is *race* and/or *culture*. As before, we present the responses to the issue of identity, followed by a table of descriptions (supplied by some of the participants). This is followed by whether the participant felt affected in the *PsychoPy*<sup>&reg;</sup> community by that identity. Finally, we summarise the participants responses to items listed under *treatment* (by others), *self-regard*, and *isolation*. 



#### identity

##### figure

```{r figRaceCulture}
#| label: raceculture-plot
#| fig-alt: "Barplot of responses to: 'Do you, or might others who know you well, consider you part of a race/culture that is potentially discriminated against?'"

visMain |> 
  select(raceCulture) |> 
  mutate(raceCulture = forcats::fct_na_value_to_level(raceCulture, level = "(missing)")) |>
  ostFreqPlot(
    ostColour = ostOrange,
    sorting = "none"
  )

```

##### table

```{r tblRaceCulture}
#| label: race-count-table
#| tbl-cap: "Summary of responses to race and/or culture"
#| output: asis

visMain |>
  select(raceCulture) |>
  mutate(raceCulture = forcats::fct_na_value_to_level(raceCulture, level = "(missing)")) |>
  tbl_summary() |>
  modify_header(label = "**Question**") |>
  as_flex_table() |>
  flextable::flextable_to_rmd()

```

---

##### descriptions

If participants chose ***yes*** as an answer above, they were given the opportunity to describe their race(s) and/or culture(s), though doing so was optional. For those who did, the table below lists the descriptions they provided. The "NA" in the table refers to those who either did not see the question or chose not to supply a description.

The question was as follows:

>`r get_label(visMain$raceCultureDesc)`

```{r tblRaceCulturerDesc}
#| label: raceculture-desc-table
#| tbl-cap: Descriptions of race and/or culture volunteered by participants

visMain |> 
  count(raceCultureDesc) |>
  arrange(desc(n)) |>
  datatable(
    class = 'cell-border stripe',
    colnames = c(
      "Feel free to describe your race and/or culture here (or not)",
      "count"
      ),
    
    options = list(
      columnDefs = list(
        list(
          targets = 1,
          render = JS(
            "function(data, type, row, meta) {",
            "return data === null ? 'NA' : data;",
            "}"
            )
          )
        )
      )
    )

```

---

#### felt affected

The sections directly below summarise, both visually and verbally, the answer to the following question:

>`r get_label(visMain$raceCultureAffected)`

##### figure

```{r figRaceCultureAffected}
#| label: raceculture-affected-plot
#| fig-alt: "Frequency barplot of responses to the following statement: 'Do you feel that your race and/or culture has affected your interactions with the PsychoPy community or software ecosystem?' If participants chose to respond, they could respond with either 'yes' or 'no.'"


visMain |> 
  select(raceCultureAffected) |> 
  mutate(raceCultureAffected = forcats::fct_na_value_to_level(raceCultureAffected, level = "(missing)")) |>
  ostFreqPlot(
    ostColour = ostYellow,
    sorting = "none"
  )

```

##### table

```{r tblRaceCultureAffected}
#| label: race-felt-affected-count-table
#| tbl-cap: "Summary of responses to whether participants felt affected by their race and/or culture"
#| output: asis

visMain |>
  select(raceCultureAffected) |>
  mutate(raceCultureAffected = forcats::fct_na_value_to_level(raceCultureAffected, level = "(missing)")) |>
  tbl_summary() |>
  modify_header(label = "**Question**") |>
  as_flex_table() |>
  flextable::flextable_to_rmd()

```

::: {.callout-important}
Important: The question directly above regarding race and/our culture determined whether or not the participant saw the respective items directly below regarding *treatment (by others)*, *self-regard*, and *isolation*.
:::

---

#### treatment, self-regard, isolation

The following statements were seen only by the subset of participants noted above. Specifically, they were restricted to the **`r numbers_to_words(length(which(visMain$raceCultureAffected==1)))`** who replied ***yes*** to the question asking them whether they had felt that their racial and/or cultural identity has affected their interactions with the *PsychoPy*<sup>&reg;</sup> community.

The exact questions are listed in the verbal summary after the visualisation.

##### figure

```{r figRaceCultureLikert}
#| warning: false
#| label: raceculture-likert-plot
#| fig-alt: "Stacked frequency barplots of responses to statements on race/culture, categorized into the following: treatment by others, self-regard, and isolation." 

visMain |>
  select(raceCultureNegPerc:raceCultureOthersLikeMe) |> 
  stackedLikertGroups(
    likertTitle = "Race(s) and/or Culture(s)")

```

##### table

```{r tblRaceCultureLikert}
#| label: raceculture-stats-table
#| tbl-cap: "Statistics for responses to statements regarding race and/or culture"
#| output: asis

visMain |>
  select(raceCultureNegPerc:raceCultureOthersLikeMe) |> 
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "7 = Strongly agree",
    byVar = NULL,
    spanVar <- NULL,
    footNote <- NULL
  )

```

<!-- #### [PROVISIONAL REMARKS] -->

<!-- - Out of the 42 people who indicated that they were of a race and/or culture that is potentially discriminated against, only 3 indicated that they had felt that their interactions within the *PsychoPy*<sup>&reg;</sup> community had been affected because of it. That seems fairly low (though still a problem).\ -->
<!-- - Those three seemed evenly split on most of the *treatment* category (with the exception of intentionally derisive comments, where there was strictly disagreement). And all of them expressed some sort of agreement with the *self-regard* and *isolation* items. -->

---



### disability / neurodivergence

The fourth EDI category is *disability* and/or *neurodivergence*. As above, we present the responses to the issue of identity, followed by a table of descriptions (supplied by some of the participants). This is followed by whether the participant felt affected in the *PsychoPy*<sup>&reg;</sup> community by that identity. Finally, we summarise the participants responses to items listed under *treatment* (by others), *self-regard*, and *isolation*.



#### identity

##### figure

```{r figDisability}
#| label: disability-plot
#| fig-alt: "Frequency barplot of responses to the following question: 'Do you, or might others who know you well, consider you disabled and/or neurodivergent (i.e., visible or invisible; e.g., blind, paralysed, cerebral palsy, ASD, ADHD)?' If participants chose to respond, they could respond with either 'yes' or 'no.'"

visMain |> 
  select(disability) |> 
  mutate(disability = forcats::fct_na_value_to_level(disability, level = "(missing)")) |>
  ostFreqPlot(
    ostColour = ostBlue,
    sorting = "none"
  )

```

##### table

```{r tblDisability}
#| label: disability-count-table
#| tbl-cap: "Summary of responses to disability and/or neurodivergence"
#| output: asis

visMain |>
  select(disability) |>
  mutate(disability = forcats::fct_na_value_to_level(disability, level = "(missing)")) |>
  tbl_summary() |>
  modify_header(label = "**Question**") |>
  as_flex_table() |>
  flextable::flextable_to_rmd()

```

---

##### descriptions

If participants chose ***yes*** as an answer above, they were given the opportunity to describe their disability(-ies) and/or neurodivergence, though doing so was optional. For those who did, the table below lists the descriptions they provided. The "NA" in the table refers to those who either did not see the question or chose not to supply a description.

The question was as follows:

>`r get_label(visMain$disabilityDesc)`


```{r tblDisabilityDesc}
#| label: disability-desc-table
#| tbl-cap: Descriptions of disability volunteered by participants

visMain |> 
  count(disabilityDesc) |>
  arrange(desc(n)) |>
  datatable(
    class = 'cell-border stripe',
    colnames = c(
      "Feel free to describe your disabled and/or neurodivergent status (or not)",
      "count"
      ),
    
    options = list(
      columnDefs = list(
        list(
          targets = 1,
          render = JS(
            "function(data, type, row, meta) {",
            "return data === null ? 'NA' : data;",
            "}"
            )
          )
        )
      )
    )

```

---

#### felt affected

The sections directly below summarise, both visually and verbally, the answer to the following question:

>`r get_label(visMain$disabilityAffected)`

##### figure

```{r figDisabilityAffected}
#| label: disability-affected-plot
#| fig-alt: "Frequency barplot of responses to the following statement: 'Do you feel that your disabled and/or neurodivergent status has affected your interactions with the PsychoPy community or software ecosystem?' If participants chose to respond, they could respond with either 'yes' or 'no.'"

visMain |> 
  select(disabilityAffected) |> 
  mutate(disabilityAffected = forcats::fct_na_value_to_level(disabilityAffected, level = "(missing)")) |>
  ostFreqPlot(
    ostColour = ostOrange,
    sorting = "none"
  )

```

##### table

```{r tblDisabilityAffected}
#| label: disability-felt-affected-count-table
#| tbl-cap: "Summary of responses to whether participants felt affected by their disability and/or neurodivergence"
#| output: asis

visMain |>
  select(disabilityAffected) |>
  mutate(disabilityAffected = forcats::fct_na_value_to_level(disabilityAffected, level = "(missing)")) |>
  tbl_summary() |>
  modify_header(label = "**Question**") |>
  as_flex_table() |>
  flextable::flextable_to_rmd()

```

::: {.callout-important}
Important: The question directly above regarding disability and/or neurodivergence determined whether or not the participant saw the respective items directly below regarding *treatment (by others)*, *self-regard*, and *isolation*.
:::

---

#### treatment, self-regard, isolation

The following statements were seen only by the subset of participants noted above. Specifically, they were restricted to the **`r numbers_to_words(length(which(visMain$disabilityAffected==1)))`** who replied ***yes*** to the question asking them whether they had felt that their disability and/or neurodivergence has affected their interactions with the *PsychoPy*<sup>&reg;</sup> community.

The exact questions are listed in the verbal summary after the visualisation.

##### figure

```{r figDisabilityLikert}
#| warning: false
#| label: disability-likert-plot
#| fig-alt: "Stacked frequency barplots of responses to disability/neurodivergence, categorized into the following: treatment by others, self-regard, and isolation." 

visMain |>
  select(disabilityNegPerc:disabilityOthersLikeMe) |> 
  stackedLikertGroups(likertTitle = "Disability and/or neurodivergence")

```


##### table

```{r tblDisabilityLikert}
#| label: disability-stats-table
#| tbl-cap: "Statistics for responses to statements regarding disability"
#| output: asis

visMain |>
  select(disabilityNegPerc:disabilityOthersLikeMe) |> 
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "7 = Strongly agree",
    byVar = NULL,
    spanVar <- NULL,
    footNote <- NULL
  )

```

<!-- #### [PROVISIONAL REMARKS] -->

<!-- - Of the 28 participants who indicated some sort of disability and/or neurodivergence, six indicated that they thought that status had affected their interactions in the *PsychoPy*<sup>&reg;</sup> community. I think this is the highest percentage of all the groups.\ -->
<!-- - Interestingly, among those six, there was fairly widespread disagreement with the notion that they had been treated poorly by others. Rather, there is much more agreement with the self-regard issues. That is, 4-5 of those six seem to indicate lack of confidence.\ -->
<!-- - A slight majority of them also feel isolated. -->

---



### written-English language dominance

The fifth EDI category is *written-English language dominance*. As before, we present the responses to the issue of identity, followed by a table of descriptions (supplied by some of the participants). This is followed by whether the participant felt affected in the *PsychoPy*<sup>&reg;</sup> community by that identity. Finally, we summarise the participants responses to items listed under *treatment* (by others), *self-regard*, and *isolation*.



#### identity

##### figure

```{r figDomLangEng}
#| label: dominant-language-plot
#| fig-alt: "Frequency barplot of responses to the following question: 'Is your dominant (preferred) written language English?' If participants chose to respond, they could respond with either 'yes' or 'no.'"

visMain |> 
  select(domLangEnglish) |> 
  mutate(domLangEnglish = forcats::fct_na_value_to_level(domLangEnglish, level = "(missing)")) |>
  ostFreqPlot(
    ostColour = ostYellow,
    sorting = "none"
  )

```

##### table

```{r tblDomLangEng}
#| label: domlang-count-table
#| tbl-cap: "Summary of responses to written-English language dominance"
#| output: asis

visMain |>
  select(domLangEnglish) |>
  mutate(domLangEnglish = forcats::fct_na_value_to_level(domLangEnglish, level = "(missing)")) |>
  tbl_summary() |>
  modify_header(label = "**Question**") |>
  as_flex_table() |>
  flextable::flextable_to_rmd()

```

---

##### descriptions

If participants chose ***no*** as an answer above, they were given the opportunity to describe their dominant language, though doing so was optional. For those who did, the table below lists the descriptions they provided. The "NA" in the table refers to those who either did not see the question or chose not to supply a description.

The question was as follows:

>`r get_label(visMain$domLangDesc)`

```{r tblDomLangEngDesc}
#| label: domlang-desc-table
#| tbl-cap: Non-dominant languages volunteered by participants

visMain |> 
  count(domLangDesc) |>
  arrange(desc(n)) |>
  datatable(
    class = 'cell-border stripe',
    colnames = c(
      "Feel free to type in your dominant language (or not)",
      "count"
      ),
    
    options = list(
      columnDefs = list(
        list(
          targets = 1,
          render = JS(
            "function(data, type, row, meta) {",
            "return data === null ? 'NA' : data;",
            "}"
            )
          )
        )
      )
    )

```

---

#### felt affected

The sections directly below summarise, both visually and verbally, the answer to the following question:

>`r get_label(visMain$domLangAffected)`

##### figure

```{r figDomLangEngAffected}
#| label: dominant-language-affected-plot
#| fig-alt: "Frequency barplot of responses to the following statement: 'Do you feel that your dominant language has affected your interactions with the PsychoPy community or software ecosystem?' If participants chose to respond, they could respond with either 'yes' or 'no.'"

visMain |> 
  select(domLangAffected) |> 
  mutate(domLangAffected = forcats::fct_na_value_to_level(domLangAffected, level = "(missing)")) |>
  ostFreqPlot(
    ostColour = ostBlue,
    sorting = "none"
  )

```

##### table

```{r tblDomLangEngAffected}
#| label: domlangEng-felt-affected-count-table
#| tbl-cap: "Summary of responses to whether participants felt affected by their non-English written-language dominance"
#| output: asis

visMain |>
  select(domLangAffected) |>
  mutate(domLangAffected = forcats::fct_na_value_to_level(domLangAffected, level = "(missing)")) |>
  tbl_summary() |>
  modify_header(label = "**Question**") |>
  as_flex_table() |>
  flextable::flextable_to_rmd()

```

::: {.callout-important}
Important: The question directly above regarding language dominance in written English determined whether or not the participant saw the respective items directly below regarding *treatment (by others)*, *self-regard*, and *isolation*.
:::

---

#### treatment, self-regard, isolation

The following statements were seen only by the subset of participants noted above. Specifically, they were restricted to the **`r numbers_to_words(length(which(visMain$domLangAffected==1)))`** who replied ***yes*** to the question asking them whether they had felt that their language dominance has affected their interactions with the *PsychoPy*<sup>&reg;</sup> community.

The exact questions are listed in the verbal summary after the visualisation.

##### figure

```{r figDomLangEngLikert}
#| warning: false
#| label: domlang-likert-plot
#| fig-alt: "Stacked frequency barplots of responses to language dominance, categorized by the following: treatment by others, self-regard, and isolation." 

visMain |>
  select(domLangNegPerc:domLangOthersLikeMe) |> 
  stackedLikertGroups(
    likertTitle = "Dominant Language")

```

##### table

```{r tblDomLangEngLikert}
#| label: domlang-stats-table
#| tbl-cap: "Statistics for responses to statements regarding dominant language"
#| output: asis

visMain |>
  select(domLangNegPerc:domLangOthersLikeMe) |> 
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "7 = Strongly agree",
    byVar = NULL,
    spanVar <- NULL,
    footNote <- NULL
  )

```

<!-- #### [PROVISIONAL REMARKS] -->

<!-- - the percentage of participants dominant in a written language other than English was second only to those indicating one or more disabilities and/or neurodivergence.\ -->
<!-- - their dominant concern seems to be isolation rather than treatment by others or self-regard\ -->
<!-- - a sizeable minority of them, however, is concerned that they feel they need to hide their language dominance in order to be taken seriously. -->


---


## participant background

The first few items on the survey collected information about  general background demographics, including participants' career status, the role they typically play in their usage of *PsychoPy*<sup>&reg;</sup>. 

Unlike the items above that directly address dimensions of equity, diversity, and inclusion, everyone was able to answer the questions below. However, we can still view each item with respect to whether responses varied according to the various groups that respondents identified with.

These are covered in the subsections below.

```{r importLongFiles}
# These are for some of the interactions between EDI variables
# and background variables

longerDataSimple <- readRDS("longerDataSimple.rds")
longerDataContributions <- readRDS("longerDataContributions.rds")
longerDataDeterrents <- readRDS("longerDataDeterrents.rds")

```


### career status

This section summarises, both visually and verbally, the answer to the following question:

>`r get_label(visMain$careerStatus)`

Participants had to choose from one of the following:

- *Researcher - early career (e.g. PhD, postdoc)*\
- *Researcher - mid career (e.g. Assistant/Associate Professor)*\
- *Researcher - senior (e.g. Full Professor)*\
- *Technical - junior*\
- *Technical - senior*

#### everyone 

The visualisation below presents responses in descending order of frequency.

##### figure

```{r figCareerStatus}
#| label: career-status-plot
#| fig-alt: "Descending frequency barplot of the responses to the following question: 'Roughly speaking, what is your career status?'"

visMain |>
  select(careerStatus) |>
  mutate(careerStatus = forcats::fct_na_value_to_level(careerStatus, level = "(missing)")) |>
  ostFreqPlot(
    ostColour = ostBlue, 
    sorting = "desc"
    )

```

##### table

```{r tblCareerStatus}
#| label: career-status-count-table
#| tbl-cap: "Summary of responses to career status"
#| output: asis

visMain |>
  select(careerStatus) |>
  mutate(careerStatus = forcats::fct_na_value_to_level(careerStatus, level = "(missing)")) |>
  tbl_summary() |>
  modify_header(label = "**Question**") |>
  as_flex_table() |>
  flextable::flextable_to_rmd()

```

<!-- ##### [PROVISIONAL REMARKS] -->

<!-- - Looks like almost half of the responses came from early-career researchers -->

---

#### interactions

##### gender

###### figure

```{r figCareerStatusByGender}
#| label: career-status-by-gender-plot
#| fig-alt: "Descending frequency barplot of the responses by gender to the following question: 'Roughly speaking, what is your career status?'"

contingencyPlot(
  df = visMain,
  contingX = "careerStatus",
  contingGrp = "gender",
  colours = ostColours4na
  )

```

###### table

```{r tblCareerStatusByGender}
#| label: careerstatus-by-gender-stats-table
#| tbl-cap: "Summary of responses to career status by gender."
#| output: asis

visMain |>
  contingencyTable(
    contingX = "careerStatus", 
    contingGrp = "gender"
    )

```

##### other EDI dimensions

###### figure

```{r figCareerStatusByOtherEdiVars}
#| label: career-status-by-other-edis-plot
#| fig-alt: "Wrapped, stacked frequency barplots of the responses by EDI variables other than gender to the following question: 'Roughly speaking, what is your career status?'"

careerStatusLabel <- get_label(longerDataSimple$careerStatus)

longerDataSimple |>
  #drop_na(response) |>
  #drop_na(careerStatus) |>
  wrappedStackedFreqPlot(
    xVar = careerStatus,
    fillVar = response,
    fillLabel = "Member of\nEDI group",
    wrapVar = ediVar,
    ostColours = ostColours2rev,
    figCaption = NULL,
    figTitle = careerStatusLabel,
    titleAdjust = -202
  )

```

###### tables


```{r tblCareerStatusBySexuality}
#| label: careerstatus-by-sexuality-stats-table
#| tbl-cap: "Summary of responses to career status by sexual orientation"
#| output: asis

visMain |>
  contingencyTable(
    contingX = "careerStatus", 
    contingGrp = "nonHeteroCommunity"
    )

```

---

```{r tblCareerStatusByRace}
#| label: careerstatus-by-race-stats-table
#| tbl-cap: "Summary of responses to career status by race and/or culture"
#| output: asis

visMain |>
  contingencyTable(
    contingX = "careerStatus", 
    contingGrp = "raceCulture"
    )

```

---

```{r tblCareerStatusByDisability}
#| label: careerstatus-by-disability-stats-table
#| tbl-cap: "Summary of responses to career status by disability and/or neurodivergence"
#| output: asis

visMain |>
  contingencyTable(
    contingX = "careerStatus", 
    contingGrp = "disability"
    )

```

---

```{r tblCareerStatusByDomlang}
#| label: careerstatus-by-domlang-stats-table
#| tbl-cap: "Summary of responses to career status by dominant written language"
#| output: asis

visMain |>
  contingencyTable(
    contingX = "careerStatus", 
    contingGrp = "domLangEnglish"
    )

```

---

### type of engagement with *PsychoPy*<sup>&reg;</sup>

This section summarises, both visually and verbally, the responses to the following prompt:

>`r get_label(visMain$engagement)`

Participants had to choose from one of the following:

- *Occasional user*\
- *Frequent user*\
- *Occasional contributor*\
- *Frequent contributor*\
- *Senior developer*

#### everyone

The visualisation below presents responses in descending order of frequency.

##### figure

```{r figEngagement}
#| label: engagement-type-plot-everyone
#| fig-alt: "Descending frequency barplot of everyone's responses to the following question: 'What best describes your role/usage of PsychoPy?'"

visMain |>
  select(engagement) |>
  mutate(engagement = forcats::fct_na_value_to_level(engagement, level = "(missing)")) |>
  ostFreqPlot(
    ostColour = ostOrange, 
    sorting = "desc"
    )

```

##### table

```{r tblEngagement}
#| label: engagement-count-table
#| tbl-cap: "Summary of responses to engagement level"
#| output: asis

visMain |>
  select(engagement) |>
  mutate(engagement = forcats::fct_na_value_to_level(engagement, level = "(missing)")) |>
  tbl_summary() |>
  modify_header(label = "**Question**") |>
  as_flex_table() |>
  flextable::flextable_to_rmd()

```

<!-- ##### [PROVISIONAL REMARKS] -->

<!-- - just over 88% of the people who responded are users, not contributors\ -->
<!-- - almost all of the others were *occasional contributors*\ -->
<!-- - but about 2.2% were *frequent contributors* or *senior developers* -->


#### interactions

##### gender

###### figure

```{r figEngagementByGender}
#| label: engagement-type-plot-gender
#| fig-alt: "Descending frequency barplot of responses by gender to the following question: 'What best describes your role/usage of PsychoPy?'"

contingencyPlot(
  df = visMain,
  contingX = "engagement",
  contingGrp = "gender",
  colours = ostColours4na
  )

```

###### table

```{r tblEngagementByGender}
#| label: engagement-by-gender-stats-table
#| tbl-cap: "Summary of responses by gender to type of engagement"
#| output: asis

visMain |>
  contingencyTable(
    contingX = "engagement", 
    contingGrp = "gender"
    )

```

---

##### other EDI variables

###### figure

```{r figEngagementByOtherVars}

engagementLabel <- get_label(longerDataSimple$careerStatus)

longerDataSimple |>
  #drop_na(response) |>
  #drop_na(engagement) |>
  wrappedStackedFreqPlot(
    xVar = engagement,
    fillVar = response,
    fillLabel = "Member of\nEDI group",
    wrapVar = ediVar,
    ostColours = ostColours2rev,
    figCaption = NULL,
    figTitle = engagementLabel,
    titleAdjust = -120
  )


```


###### tables

---

```{r tblEngagementBySexuality}
#| label: engagement-by-sexuality-stats-table
#| tbl-cap: "Summary of responses by sexual orientation to type of engagement"
#| output: asis

visMain |>
  contingencyTable(
    contingX = "engagement", 
    contingGrp = "nonHeteroCommunity"
    )

```

---

```{r tblEngagementByRace}
#| label: engagement-by-race-stats-table
#| tbl-cap: "Summary of responses by race and/or culture to type of engagement"
#| output: asis

visMain |>
  contingencyTable(
    contingX = "engagement", 
    contingGrp = "raceCulture"
    )

```

---

```{r tblEngagementByDisability}
#| label: engagement-by-disability-stats-table
#| tbl-cap: "Summary of responses by disability and/or neurodivergence to type of engagement"
#| output: asis

visMain |>
  contingencyTable(
    contingX = "engagement", 
    contingGrp = "disability"
    )

```

---

```{r tblEngagementByLangDomEng}
#| label: engagement-by-dominant-language-stats-table
#| tbl-cap: "Summary of responses by dominant language to type of engagement"
#| output: asis

visMain |>
  contingencyTable(
    contingX = "engagement", 
    contingGrp = "domLangEnglish"
    )

```

---

### ways of contributing

This was a select-all-that-apply question, worded as follows:

>In which way do you contribute most? (select all that apply)

Each participant could select more than one option when describing how they contribute most. For ease of visual and verbal summary, the responses were converted into new variables, one per response. It is important to note here that multiple responses from the same person were possible here (and certainly did occur).

The possible selections were as follows:

- *Improving documentation*\
- *Supporting other users (e.g., on the forum)*\
- *Fixing bugs*\
- *Adding new features*\
- *Providing translations to other languages*\
- *Other (describe)*

It is important to keep in mind that participants may be counted as *yes* or *no* independently in any of the possible responses, which were converted to individual boolean variables below. If they selected the response, we assigned the value *selected*; if they did not, we assigned the value *not selected*. 

```{r importContributionsLong}

longerDataContributions <- readRDS("longerDataContributions.rds")
contributeLabel <- get_label(longerDataContributions$contributionType)
contributeCaption <- "Notes:\n1. Respondents could select more than one contribution type.\n2. 'Unselected' is equivalent to 'NA'"

```


#### everyone

##### figure

```{r figContributions}
#| label: contribEveryone-plot
#| fig-alt: "Frequency barplot of the selections made in response to the following question: 'In which way do you contribute most?'"

longerDataContributions |>
  #drop_na(selected) |>
  wrappedFreqPlot(
    xVar = choices,
    fillVar = choices,
    wrapVar = contributionType,
    ostColours = ostColours2rev
  )

```

##### table

```{r tblContributions}
#| label: contributions-stats-table
#| tbl-cap: "Summary of responses to contribution type"
#| output: asis

longerDataContributions |>
  contingencyTable(
    contingX = "contributionType", 
    contingGrp = "choices"
    )

```

##### descriptions

The participants were given the option to describe those other contributions. These descriptions are listed in the table below.

```{r tblOtherContributions}
#| label: other-contributions-table
#| tbl-cap: "Descriptions of other contributions to PyschoPy/JS that some participants provided"

visMain |> 
  select(contribOtherDesc) |>
  drop_na() |>
  datatable(
    class = 'cell-border stripe',
    colnames = "[I] contribute in these other ways"
  )

```



<!-- ##### [PROVISIONAL REMARKS] -->

<!-- - supporting others seems to be the dominant form of contributing among the survey participants -->

---

#### interactions

##### gender

###### figure

```{r figContributionsByGender}
#| label: contrib-by-gender-plot
#| fig-alt: "Frequency barplot of the choices made by gender in response to the following question: 'In which way do you contribute most?'"

legendLabel = "Gender"
longerDataContributions |>
  #drop_na(gender) |>
  wrappedStackedFreqPlot(
    xVar = choices,
    fillVar = gender,
    fillLabel = legendLabel,
    wrapVar = contributionType,
    ostColours = ostColours3,
    figTitle = contributeLabel,
    figCaption = contributeCaption,
    titleAdjust = NULL
  )

```

###### table

```{r tblContributionsByGender}
#| label: ways-of-contributing-by-gender-stats-table
#| tbl-cap: "Summary of responses by gender to ways of contributing"
#| output: asis

longerDataContributions |>
  select(gender, contributionType, choices) |>
  stratifiedContingencyTable(
    strataVar = "gender",
    byVar = "choices"
    )

```


---

##### sexual orientation

###### figure

```{r figContributionsBySexuality}
#| label: contrib-by-sexuality-plot
#| fig-alt: "Frequency barplot of the selections made by sexual orientation in response to the following question: 'In which way do you contribute most?'"

legendLabel = "non-heterosexual\ncommunity"
longerDataContributions |>
  drop_na(nonHeteroCommunity) |>
  wrappedStackedFreqPlot(
    xVar = choices,
    fillVar = nonHeteroCommunity,
    wrapVar = contributionType,
    ostColours = ostColours2rev,
    titleAdjust = NULL,
    fillLabel = legendLabel,
    figTitle = contributeLabel,
    figCaption = contributeCaption
  )

```

###### table

```{r tblContributionsBySexuality}
#| label: ways-of-contributing-by-sexuality-stats-table
#| tbl-cap: "Summary of responses by sexual orientation to ways of contributing"
#| output: asis

longerDataContributions |>
  select(nonHeteroCommunity, contributionType, choices) |>
  stratifiedContingencyTable(
    strataVar = "nonHeteroCommunity",
    byVar = "choices"
    )

```


---

##### race and/or culture

###### figure

```{r figContributionsByRace}
#| label: contrib-by-race-plot
#| fig-alt: "Frequency barplot of the selections made by race and/or culture in response to the following question: 'In which way do you contribute most?'"

legendLabel = "Race and/or\nculture"
longerDataContributions |>
  drop_na(raceCulture) |>
  wrappedStackedFreqPlot(
    xVar = choices,
    fillVar = raceCulture,
    wrapVar = contributionType,
    ostColours = ostColours2rev,
    titleAdjust = NULL,
    fillLabel = legendLabel,
    figTitle = contributeLabel,
    figCaption = contributeCaption
  )

```

###### table

```{r tblContributionsByRace}
#| label: ways-of-contributing-by-race-stats-table
#| tbl-cap: "Summary of responses by race and/or culture to ways of contributing"
#| output: asis

longerDataContributions |>
  select(raceCulture, contributionType, choices) |>
  stratifiedContingencyTable(
    strataVar = "raceCulture",
    byVar = "choices"
    )

```


---

##### disability and/or neurodivergence

###### figure

```{r figContributionsByDisability}
#| label: contrib-by-disability-plot
#| fig-alt: "Frequency barplot of the selections made by disability and/or neurodivergence in response to the following question: 'In which way do you contribute most?'"

legendLabel = "Disability and/or\nneurodivergence"
longerDataContributions |>
  drop_na(disability) |>
  wrappedStackedFreqPlot(
    xVar = choices,
    fillVar = disability,
    wrapVar = contributionType,
    ostColours = ostColours2rev,
    titleAdjust = NULL,
    fillLabel = legendLabel,
    figTitle = contributeLabel,
    figCaption = contributeCaption
  )

```

###### table

```{r tblContributionsByDisability}
#| label: ways-of-contributing-by-disability-stats-table
#| tbl-cap: "Summary of responses by disability and/or neuordivergence to ways of contributing"
#| output: asis

longerDataContributions |>
  select(disability, contributionType, choices) |>
  stratifiedContingencyTable(
    strataVar = "disability",
    byVar = "choices"
    )

```


---

##### English as dominant language

###### figure

```{r figContributionsByDomLangEng}
#| label: contrib-by-dominant-language-plot
#| fig-alt: "Frequency barplot of the selections made by whether one is dominant in written English in response to the following question: 'In which way do you contribute most?'"

legendLabel = "English as a\ndominant language"
longerDataContributions |>
  drop_na(domLangEnglish) |>
  wrappedStackedFreqPlot(
    xVar = choices,
    fillVar = domLangEnglish,
    wrapVar = contributionType,
    ostColours = ostColours2rev,
    titleAdjust = NULL,
    fillLabel = legendLabel,
    figTitle = contributeLabel,
    figCaption = contributeCaption
  )

```

###### table

```{r tblContributionsByDomLangEng}
#| label: ways-of-contributing-by-language_dominance-stats-table
#| tbl-cap: "Summary of responses by written-English dominance to ways of contributing"
#| output: asis

longerDataContributions |>
  select(domLangEnglish, contributionType, choices) |>
  stratifiedContingencyTable(
    strataVar = "domLangEnglish",
    byVar = "choices"
    )

```


---


### deterrents to contributing

Participants were asked the following:

>To what extent do each of the following limit the amount you feel able to contribute to the PsychoPy project?

Below the question was a list of the following potential causes:

- *Lack of interest*\
- *Lack of time*\
- *Lack of knowledge on how to get started*\
- *Lack of coding skills*\
- *Not confident I would be welcomed by the community*\
- *Not aware contributing was possible*

Participants could rank each of these on a `1`-`5` Likert scale, where `1` indicated *not at all* and a `5` indicated *very much*.

This section summarises, both visually and verbally, the rankings that participants provided for each potential cause.

::: {.callout-note}
Note that on this `1`-`5` scale, the number `3` is directly in the middle of the scale, which can be interpreted as neither agreeing nor disagreeing. We set responses of `3` to the side of the stacked frequency barplots below, in yellow.

Also, the barplots are sorted along descending frequency of agreement. That is, the topmost barplot is the one with highest number of agreements, whereas the bottommost barplot is the one with the highest number of disagreements.
:::

#### everyone

##### figure

```{r figDeterrents}
#| label: deterrents-plot
#| fig-alt: "Stacked frequency barplots of the responses to: 'To what extent do each of the following limit the amount you feel able to contribute to the PsychoPy project?'"

visMain |>
  dplyr::select(starts_with("deterrents")) |>
  stackedFrequencies(
    colours = ostColours5,
    figTitle = "Deterrents to contributing for everyone"
    )

```


##### table

```{r tblDeterrents}
#| label: deterrents-stats-table
#| tbl-cap: "Statistical summaries of responses to statements regarding deterrents to contributing."
#| output: asis

visMain |>
  select(starts_with("deterrents"))  |>
  likertTable(
    lowerBound = "1 = not at all",
    upperBound = "5 = very much",
    byVar = NULL,
    spanVar <- NULL,
    footNote <- NULL
  )

```



<!-- Combined with the fact that many of these responses are coming from frequent and occasional users (vs. contributors), this is both unsurprising and promising for the purposes of our survey, I think... except *lack of time* -->


<!-- ##### [PROVISIONAL REMARKS] -->

<!-- - *Lack of time* is dominant here\ -->
<!-- - but *not knowing how to start* is close behind, which is good news for us in terms of increasing the contributor base\ -->
<!-- - importantly, most participants disagreed that *lack of interest* or *lack of confidence in a welcome* were holding them back -->

#### interactions

```{r createDeterrentsLabel}

deterrentsLabel <- get_label(longerDataDeterrents$deterrent)
deterrentsCaption <- "Notes: \n1. A response of 1 indicates 'not at all' \n2. A response of 5 indicates 'very much'\n3. The mean is represented by the diamond"

```


##### gender

###### figure

```{r figDeterrentsByGender}
#| label: deterrents-likert-plot-by-gender
#| fig-alt: "Boxplots of responses by gender to the the following question: 'To what extent do each of the following limit the amount you feel able to contribute to the PsychoPy project?.'" 


legendLabel <- "Gender"
longerDataDeterrents |>
  select(gender, deterrent, response) |>
  #drop_na(gender) |>
  #drop_na(deterrent) |>
  #drop_na(response) |>
  interactionBoxplot(
    xVar = response,
    yVar = gender,
    wrapVar = deterrent,
    lowerBound = 1,
    upperBound = 5,
    ostColours = ostColours3,
    xLabel = NULL, #deterrentsLabel,
    fillLabel = legendLabel,
    figCaption = "1 = Strongly disagree; 5 = Strongly agree" #deterrentsCaption
    )

```

###### table


```{r tblDeterrentsByGender}
#| label: deterrents-by-gender-stats-table
#| tbl-cap: "Statistical summaries by gender of responses to statements regarding deterrents to contributing."
#| output: asis

textForFootnote <- paste0(
  "There was/were ", 
  sum(is.na(visMain$nonHeteroCommunity)),
  " extra missing values in this table due to non-responses to this particular EDI variable.")
textForSpan <- get_label(visMain$gender)
visMain |>
  select(starts_with("deterrents"), gender)  |>
  mutate(
    gender =
      as.character(gender)
     ) |>
  likertTable(
    lowerBound = "1 = not at all",
    upperBound = "5 = very much",
    byVar = "gender",
    spanVar = textForSpan,
    footNote <- textForFootnote
  )

```

---

##### sexual orientation

###### figure

```{r figDeterrentsBySexuality}
#| label: deterrents-likert-plot-by-sexuality
#| fig-alt: "Boxplots of responses by sexual orientation to the the following question: 'To what extent do each of the following limit the amount you feel able to contribute to the PsychoPy project?.'" 

legendLabel <- "Non-heterosexual\ncommunity"
longerDataDeterrents |>
  select(nonHeteroCommunity, deterrent, response) |>
  #drop_na(nonHeteroCommunity) |>
  # drop_na(deterrent) |>
  # drop_na(response) |>
  interactionBoxplot(
    xVar = response,
    yVar = nonHeteroCommunity,
    wrapVar = deterrent,
    lowerBound = 1,
    upperBound = 5,
    ostColours = ostColours2rev,
    xLabel = NULL, #deterrentsLabel,
    fillLabel = legendLabel,
    figCaption = "1 = Strongly disagree; 5 = Strongly agree" #deterrentsCaption
)
```

###### table


```{r tblDeterrentsBySexuality}
#| label: deterrents-by-sexuality-stats-table
#| tbl-cap: "Statistical summaries by sexual orientation of responses to statements regarding deterrents to contributing."
#| output: asis

textForFootnote <- paste0(
  "There was/were ", 
  sum(is.na(visMain$nonHeteroCommunity)),
  " extra missing values in this table due to non-responses to this particular EDI variable.")
textForSpan <- get_label(visMain$nonHeteroCommunity)
visMain |>
  select(starts_with("deterrents"), nonHeteroCommunity)  |>
  mutate(
    nonHeteroCommunity =
      as.character(nonHeteroCommunity)
     ) |>
  likertTable(
    lowerBound = "1 = not at all",
    upperBound = "5 = very much",
    byVar = "nonHeteroCommunity",
    spanVar = textForSpan,
    footNote <- textForFootnote
  )


```

---

##### race and/or culture

###### figure

```{r figDeterrentsByRace}
#| label: deterrents-likert-plot-by-race
#| fig-alt: "Boxplots of responses by race and/or culture to the the following question: 'To what extent do each of the following limit the amount you feel able to contribute to the PsychoPy project?.'" 

legendLabel <- "Race and/or culture\nthat is potentially\ndiscriminated against"
longerDataDeterrents |>
  select(raceCulture, deterrent, response) |>
  # drop_na(raceCulture) |>
  # drop_na(deterrent) |>
  # drop_na(response) |>
  interactionBoxplot(
    xVar = response,
    yVar = raceCulture,
    wrapVar = deterrent,
    lowerBound = 1,
    upperBound = 5,
    ostColours = ostColours2rev,
    xLabel = deterrentsLabel,
    fillLabel = legendLabel,
    figCaption = deterrentsCaption
)

```

###### table

```{r tblDeterrentsByRace}
#| label: deterrents-by-race-stats-table
#| tbl-cap: "Statistical summaries by race and/or culture of responses to statements regarding deterrents to contributing."
#| output: asis

textForFootnote <- paste0(
  "There was/were ", 
  sum(is.na(visMain$raceCulture)),
  " extra missing values in this table due to non-responses to this particular EDI variable.")
textForSpan <- get_label(visMain$raceCulture)
visMain |>
  select(starts_with("deterrents"), raceCulture)  |>
  mutate(
    raceCulture =
      as.character(raceCulture)
     ) |>
  likertTable(
    lowerBound = "1 = not at all",
    upperBound = "5 = very much",
    byVar = "raceCulture",
    spanVar = textForSpan,
    footNote <- textForFootnote
  )

```

---

##### disability and/or neurodivergence

###### figure

```{r figDeterrentsByDisability}
#| label: deterrents-likert-plot-by-disability
#| fig-alt: "Boxplots of responses by disability and/or neurodivergence to the the following question: 'To what extent do each of the following limit the amount you feel able to contribute to the PsychoPy project?.'" 

legendLabel <- "Disabled and/or\n neurodivergent"
longerDataDeterrents |>
  select(disability, deterrent, response) |>
  # drop_na(disability) |>
  # drop_na(deterrent) |>
  # drop_na(response) |>
  interactionBoxplot(
    xVar = response,
    yVar = disability,
    wrapVar = deterrent,
    lowerBound = 1,
    upperBound = 5,
    ostColours = ostColours2rev,
    xLabel = deterrentsLabel,
    fillLabel = legendLabel,
    figCaption = deterrentsCaption
)

```

###### table

```{r tblDeterrentsByDisability}
#| label: deterrents-by-disability-stats-table
#| tbl-cap: "Statistical summaries by disability and/or neurodivergence of responses to statements regarding deterrents to contributing."
#| output: asis

textForFootnote <- paste0(
  "There was/were ", 
  sum(is.na(visMain$disability)),
  " extra missing values in this table due to non-responses to this particular EDI variable.")
textForSpan <- get_label(visMain$disability)
visMain |>
  select(starts_with("deterrents"), disability)  |>
  mutate(
    disability = 
      as.character(disability)
    ) |>
  likertTable(
    lowerBound = "1 = not at all",
    upperBound = "5 = very much",
    byVar = "disability",
    spanVar = textForSpan,
    footNote <- textForFootnote
  )

```


---

##### English as dominant language

###### figure

```{r figDeterrentsByDomLangEng}
#| label: deterrents-likert-plot-by-langdom
#| fig-alt: "Boxplots of responses by whether English is the respondent's dominant written language to the the following question: 'To what extent do each of the following limit the amount you feel able to contribute to the PsychoPy project?.'" 
legendLabel <- "English is dominant\nwritten language"
longerDataDeterrents |>
  select(domLangEnglish, deterrent, response) |>
  # drop_na(domLangEnglish) |>
  # drop_na(deterrent) |>
  # drop_na(response) |>
  interactionBoxplot(
    xVar = response,
    yVar = domLangEnglish,
    wrapVar = deterrent,
    lowerBound = 1,
    upperBound = 5,
    ostColours = ostColours2rev,
    xLabel = deterrentsLabel,
    fillLabel = legendLabel,
    figCaption = deterrentsCaption
)

```

###### table

```{r tblDeterrentsByDomLangEng}
#| label: deterrents-by-domlang-stats-table
#| tbl-cap: "Statistical summaries by whether the respondents' dominant written language is English of responses to statements regarding deterrents to contributing."
#| output: asis

textForFootnote <- paste0(
  "There was/were ", 
  sum(is.na(visMain$disability)),
  " extra missing values in this table due to non-responses to this particular EDI variable.")
textForSpan <- get_label(visMain$domLangEnglish)
visMain |>
  select(starts_with("deterrents"), domLangEnglish)  |>
  mutate(
    domLangEnglish = 
      as.character(domLangEnglish)
    ) |>
  likertTable(
    lowerBound = "1 = not at all",
    upperBound = "5 = very much",
    byVar = "domLangEnglish",
    spanVar = textForSpan,
    footNote <- textForFootnote
  )

```


---

### workshops on contributing

This section summarises, both visually and verbally, the answer to the following question:

>`r get_label(visMain$workshopsOnContributing)`

Participants provided answers on a `1`-`5` Likert scale, where `1` indicated *Strongly disagree* and a `5` indicated *Strongly agree*.

#### everyone

##### figure

```{r workshopLabels}

workshopLabel <- get_label(longerDataSimple$workshopsOnContributing)
likertValues <- get_labels(longerDataSimple$workshopsOnContributing)

```


```{r figWorkshops}
#| label: contrib-workshops-plot
#| fig-alt: "Barplot of responses to the following statement: 'My engagement with the community would be helped if workshops were provided on how to contribute'"

longerDataSimple |> 
  select(workshopsOnContributing) |> 
  ostFreqPlot(
    ostColour = ostYellow,
    sorting = "none"
  )

```


##### table

```{r tblWorkshops}
#| label: workshops-stats-table
#| tbl-cap: "Statistical summaries of responses to statement regarding the potential helpfulness of contributor workshops."
#| output: asis

visMain |>
  select(workshopsOnContributing)  |>
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "5 = Strongly agree",
    byVar = NULL,
    spanVar = NULL,
    footNote <- NULL
  )

```

<!-- ##### [PROVISIONAL REMARKS] -->

<!-- - It looks like around half of the participants agreed that they could be engaged more with workshops. That's really good. -->

#### interactions

##### gender

###### figure

```{r figWorkshopsByGender}
#| label: workshop-likert-plot-by-gender
#| fig-alt: "Boxplots of responses by gender to the question regarding whether the participant felt their engagement would increase with contributor workshops." 

# WORK MORE ON THIS NA THING

figCaptionText <- paste0(
  "Notes: \n1. A response of 1 indicates 'Strongly disagree' \n2. A response of 5 indicates 'Strongly agree'\n3. The mean is represented by the diamond\n4. There were ",
  nrow(visMain)-sum(complete.cases(visMain[,c("gender","workshopsOnContributing")])),
  " observations that were dropped due to having missing values for either variable."
)
legendLabel <- "Gender"
visMain |>
  select(gender, workshopsOnContributing) |>
  drop_na(gender) |>
  drop_na(workshopsOnContributing) |>
  interactionBoxplot(
    xVar = workshopsOnContributing,
    yVar = gender,
    lowerBound = 1,
    upperBound = 5,
    ostColours = ostColours3,
    xLabel = workshopLabel,
    fillLabel = legendLabel,
    tickLabels = likertValues,
    pointFill = "darkgrey",
    wrapVar = NULL,
    figCaption = figCaptionText
    )

```

###### table

```{r tblWorkshopsByGender}
#| label: workshops-by-gender-stats-table
#| tbl-cap: "Summary of responses to desire for workshops by gender."
#| output: asis

textForSpan <- get_label(visMain$gender)
visMain |>
  select(workshopsOnContributing, gender)  |>
  mutate(gender = forcats::fct_na_value_to_level(gender, level = "(missing)")) |>
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "5 = Strongly agree",
    byVar = "gender",
    spanVar = textForSpan,
    footNote <- NULL
  )

```

---

##### other EDI dimensions

###### figure

```{r figWorkshopsByOtherEDIs}
#| label: workshop-likert-plot-by-other-edis
#| fig-alt: "Boxplots of responses by EDI variables other than gender to the question regarding whether the participant felt their engagement would increase with contributor workshops." 

legendLabel <- "Member of\nEDI group"
longerDataSimple |>
  drop_na(workshopsOnContributing) |>
  drop_na(response) |>
  interactionBoxplot(
    xVar = workshopsOnContributing,
    yVar = response,
    lowerBound = 1,
    upperBound = 5,
    ostColours = ostColours2rev,
    xLabel = workshopLabel,
    fillLabel = legendLabel,
    tickLabels = likertValues,
    pointFill = "#F7F11C",
    wrapVar = ediVar,
    figCaption = "Notes:\n1. A response of 1 indicates 'Strongly disagree'\n2. A response of 5 indicates 'Strongly agree'\n3. The mean is represented by the diamond"
  )

```

###### tables

---

```{r tblWorkshopsBySexuality}
#| label: workshops-by-sexuality-stats-table
#| tbl-cap: "Summary of responses to desire for workshops by sexual orientation."
#| output: asis

textForSpan <- get_label(visMain$nonHeteroCommunity)
visMain |>
  select(workshopsOnContributing, nonHeteroCommunity)  |>
  mutate(nonHeteroCommunity = as.character(nonHeteroCommunity)) |>
  mutate(nonHeteroCommunity = forcats::fct_na_value_to_level(nonHeteroCommunity, level = "(missing)")) |>
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "5 = Strongly agree",
    byVar = "nonHeteroCommunity",
    spanVar = textForSpan,
    footNote <- NULL
  )

```

---

```{r tblWorkshopsByRace}
#| label: workshops-by-race-stats-table
#| tbl-cap: "Summary of responses to desire for workshops by race and/or culture."
#| output: asis

textForSpan <- get_label(visMain$raceCulture)
visMain |>
  select(workshopsOnContributing, raceCulture)  |>
  mutate(raceCulture = as.character(raceCulture)) |>
  mutate(raceCulture = forcats::fct_recode(raceCulture, "yes" = "1", "no" = "0")) |>
  mutate(raceCulture = forcats::fct_na_value_to_level(raceCulture, level = "(missing)")) |>
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "5 = Strongly agree",
    byVar = "raceCulture",
    spanVar = textForSpan,
    footNote <- NULL
  )

```

---

```{r tblWorkshopsByDisability}
#| label: workshops-by-disability-stats-table
#| tbl-cap: "Summary of responses to desire for workshops by disability and/or neurodivergence."
#| output: asis

textForSpan <- get_label(visMain$disability)
visMain |>
  select(workshopsOnContributing, disability)  |>
  mutate(disability = as.character(disability)) |>
  mutate(disability = forcats::fct_recode(disability, "yes" = "1", "no" = "0")) |>
  mutate(disability = forcats::fct_na_value_to_level(disability, level = "(missing)")) |>
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "5 = Strongly agree",
    byVar = "disability",
    spanVar = textForSpan,
    footNote <- NULL
  )

```

---

```{r tblWorkshopsByDomLangEng}
#| label: workshops-by-domlangenglish-stats-table
#| tbl-cap: "Summary of responses to desire for workshops by written-English language dominance."
#| output: asis

textForSpan <- get_label(visMain$domLangEnglish)
visMain |>
  select(workshopsOnContributing, domLangEnglish)  |>
  mutate(domLangEnglish = as.character(domLangEnglish)) |>
  mutate(domLangEnglish = forcats::fct_recode(domLangEnglish, "yes" = "1", "no" = "0")) |>
  mutate(domLangEnglish = forcats::fct_na_value_to_level(domLangEnglish, level = "(missing)")) |>
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "5 = Strongly agree",
    byVar = "domLangEnglish",
    spanVar = textForSpan,
    footNote <- NULL
  )

```

---

## guidance

The third group of items on the survey collected information about documentation and the participants' awareness of and experience with the [Code of Conduct](https://github.com/psychopy/psychopy/blob/dev/code-of-conduct.md).

There were three questions concerning each of the following:

- awareness of the *Code of Conduct*\
- how findable, searchable, and accessible *PsychoPy*'s<sup>&reg;</sup> documentation is\
- how much they trust the *Code of Conduct* will be enforced

The first was answered with a simple *yes* or *no*. The latter two were statements evaluated with a `1`-`7` Likert scale, where `1` represented *Strongly disagree*, and `7` represented *Strongly agree*.

::: {.callout-note}
As before, note that on the `1`-`7` scale, the number `4` is directly in the middle of the scale, which can be interpreted as neither agreeing nor disagreeing. Accordingly, we set responses of `4` to the side of the respective stacked frequency barplots, in yellow.
:::

### awareness of *Code of Conduct*

The sections directly below summarise, both visually and verbally, the answer to the following question:

>`r get_label(visMain$awareOfCodeOfConduct)`

#### everyone

##### figure

```{r figCodeAware}
#| label: codeofconduct-plot
#| fig-alt: "Frequency barplot of responses to the following question: 'I am aware of the community Code of Conduct' If participants chose to respond, they could respond with either 'yes' or 'no.'"

visMain |> 
  select(awareOfCodeOfConduct) |> 
  mutate(awareOfCodeOfConduct = forcats::fct_na_value_to_level(awareOfCodeOfConduct, level = "(missing)")) |>
  ostFreqPlot(
    ostColour = ostOrange,
    sorting = "none"
  )

```

##### table

```{r tblCodeAware}
#| label: aware-code-of-conduct-count-table
#| tbl-cap: "Summary of responses to awareness of Code of Conduct"
#| output: asis

visMain |>
  select(awareOfCodeOfConduct) |>
  mutate(awareOfCodeOfConduct = forcats::fct_na_value_to_level(awareOfCodeOfConduct, level = "(missing)")) |>
  tbl_summary() |>
  modify_header(label = "**Question**") |>
  as_flex_table() |>
  flextable::flextable_to_rmd()

```

---

#### interactions

##### gender

###### figure

```{r figCodeAwareByGender}
#| label: codeofconduct-awareness-by-gender-plot
#| fig-alt: "Contingency barplot of responses by gender to the following question: 'I am aware of the community Code of Conduct' If participants chose to respond, they could respond with either 'yes' or 'no.'"

contingencyPlot(
  df = visMain,
  contingX = "awareOfCodeOfConduct",
  contingGrp = "gender",
  colours = ostColours4na
  )

```

###### table

```{r tblCodeAwareByGender}
#| label: code-of-conduct-by-gender-stats-table
#| tbl-cap: "Summary of responses by gender to awareness of the Code of Conduct"
#| output: asis

visMain |>
  contingencyTable(
    contingX = "awareOfCodeOfConduct", 
    contingGrp = "gender"
    )

```

##### other EDI dimensions

###### figure

```{r figCodeAwareByOtherEdis}
#| label: codeofconduct-awareness-by-edivars-plot
#| fig-alt: "Contingency barplot of responses by EDI variable (except gender) to the following question: 'I am aware of the community Code of Conduct' If participants chose to respond, they could respond with either 'yes' or 'no.'"

codeOfConductLabel <- get_label(longerDataSimple$awareOfCodeOfConduct)

longerDataSimple |>
  drop_na(response) |>
  drop_na(awareOfCodeOfConduct) |>
  wrappedStackedFreqPlot(
    xVar = awareOfCodeOfConduct,
    fillVar = response,
    fillLabel = "Member of\nEDI group",
    wrapVar = ediVar,
    ostColours = ostColours2rev,
    figCaption = NULL,
    figTitle = codeOfConductLabel,
    titleAdjust = NULL
  )

```

###### tables


```{r tblCodeAwareBySexuality}
#| label: code-of-conduct-by-sexuality-stats-table
#| tbl-cap: "Summary of responses by sexual orientation to awareness of the Code of Conduct"
#| output: asis

visMain |>
  contingencyTable(
    contingX = "awareOfCodeOfConduct", 
    contingGrp = "nonHeteroCommunity"
    )

```

---

```{r tblCodeAwareByRace}
#| label: code-of-conduct-by-race-stats-table
#| tbl-cap: "Summary of responses by race and/or culture to awareness of the Code of Conduct"
#| output: asis

visMain |>
  contingencyTable(
    contingX = "awareOfCodeOfConduct", 
    contingGrp = "raceCulture"
    )

```

---

```{r tblCodeAwareByDisability}
#| label: code-of-conduct-by-disability-stats-table
#| tbl-cap: "Summary of responses by disability and/or neurodivergence to awareness of the Code of Conduct"
#| output: asis

visMain |>
  contingencyTable(
    contingX = "awareOfCodeOfConduct", 
    contingGrp = "disability"
    )

```

---

```{r tblCodeAwareByDomlangEng}
#| label: code-of-conduct-by-domlang-stats-table
#| tbl-cap: "Summary of responses by written-English language dominance to awareness of the Code of Conduct"
#| output: asis

visMain |>
  contingencyTable(
    contingX = "awareOfCodeOfConduct", 
    contingGrp = "domLangEnglish"
    )

```


### findability, searchability, & accessibility

The sections directly below summarise, both visually and verbally, the answer to the following question:

>`r get_label(visMain$psychopyDocumentationEasy)`

#### everyone

##### figure

```{r figDocEasy}
#| warning: false
#| label: find-doceasy-plot
#| fig-alt: "Barplot of agreement responses to the statement regarding findability, searchability, and accessibility of documentation."

visMain |>
  select(psychopyDocumentationEasy) |>
  ostFreqPlot(
    ostColour = ostOrange,
    sorting = "none"
  )

```


##### table

```{r tblDocEasy}
#| label: doceasy-stats-table
#| tbl-cap: "Statistics for responses to statements regarding whether the documentation is findable, searchable, and accessible."
#| output: asis

visMain |>
  select("psychopyDocumentationEasy") |> 
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "7 = Strongly agree",
    byVar = NULL,
    spanVar = NULL,
    footNote <- NULL
  )

```
  

---
  
#### interactions

```{r findabilityLabels}

docEasyLabel <- get_label(visMain$psychopyDocumentationEasy)

```


##### gender

###### figure

```{r figDocEasyByGender}
#| label: doceasy-likert-plot-by-gender
#| fig-alt: "Boxplots of responses by EDI variables by gender to the question regarding whether the participants felt the documuntation for PsychoPy was easily findable, searchable, and accessible." 

legendLabel <- "Gender"
visMain |>
  drop_na(gender) |>
  drop_na(psychopyDocumentationEasy) |>
  interactionBoxplot(
    xVar = psychopyDocumentationEasy,
    yVar = gender,
    lowerBound = 1,
    upperBound = 7,
    ostColours = ostColours3,
    xLabel = docEasyLabel,
    fillLabel = legendLabel,
    tickLabels = likertValues,
    pointFill = "#F7F11C",
    wrapVar = NULL,
    figCaption = "Notes:\n1. A response of 1 indicates 'Strongly disagree'\n2. A response of 7 indicates 'Strongly agree'\n3. The mean is represented by the diamond"
  )

```

###### table

```{r tblDocEasyByGender}
#| label: doceasy-by-gender-stats-table
#| tbl-cap: "Summary of responses by gender to finding the documentation easily findable, searchable, and accessible"
#| output: asis

textForSpan <- get_label(visMain$gender)
visMain |>
  select(psychopyDocumentationEasy, gender)  |>
  mutate(gender = forcats::fct_na_value_to_level(gender, level = "(missing)")) |>
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "7 = Strongly agree",
    byVar = "gender",
    spanVar = textForSpan,
    footNote <- NULL
  )

```

##### other EDI dimensions

###### figure

```{r figDocEasyByOtherEdis}
#| label: doceasy-likert-plot-by-other-edis
#| fig-alt: "Boxplots of responses by EDI variables other than gender to the question regarding whether the participants felt the documuntation for PsychoPy was easily findable, searchable, and accessible." 

legendLabel <- "Member of\nEDI group"
longerDataSimple |>
  drop_na(psychopyDocumentationEasy) |>
  drop_na(response) |>
  interactionBoxplot(
    xVar = psychopyDocumentationEasy,
    yVar = response,
    lowerBound = 1,
    upperBound = 7,
    ostColours = ostColours2rev,
    xLabel = docEasyLabel,
    fillLabel = legendLabel,
    tickLabels = likertValues,
    pointFill = "#F7F11C",
    wrapVar = ediVar,
    figCaption = "Notes:\n1. A response of 1 indicates 'Strongly disagree'\n2. A response of 7 indicates 'Strongly agree'\n3. The mean is represented by the diamond"
  )

```

###### tables

```{r tblDocEasyBySexuality}
#| label: doceasy-by-sexuality-stats-table
#| tbl-cap: "Summary of responses by sexual orientation to finding the documentation easily findable, searchable, and accessible"
#| output: asis

textForSpan <- get_label(visMain$nonHeteroCommunity)
visMain |>
  select(psychopyDocumentationEasy, nonHeteroCommunity)  |>
  mutate(nonHeteroCommunity = forcats::fct_na_value_to_level(nonHeteroCommunity, level = "(missing)")) |>
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "7 = Strongly agree",
    byVar = "nonHeteroCommunity",
    spanVar = textForSpan,
    footNote <- NULL
  )

```

---

```{r tblDocEasyByRace}
#| label: doceasy-by-race-stats-table
#| tbl-cap: "Summary of responses by race and/or culture to finding the documentation easily findable, searchable, and accessible"
#| output: asis

textForSpan <- get_label(visMain$raceCulture)
visMain |>
  select(psychopyDocumentationEasy, raceCulture)  |>
  mutate(raceCulture = forcats::fct_na_value_to_level(raceCulture, level = "(missing)")) |>
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "7 = Strongly agree",
    byVar = "raceCulture",
    spanVar = textForSpan,
    footNote <- NULL
  )

```

---

```{r tblDocEasyByDisability}
#| label: doceasy-by-disability-stats-table
#| tbl-cap: "Summary of responses by disability and/or neurodivergence to finding the documentation easily findable, searchable, and accessible"
#| output: asis

textForSpan <- get_label(visMain$disability)
visMain |>
  select(psychopyDocumentationEasy, disability)  |>
  mutate(disability = forcats::fct_na_value_to_level(disability, level = "(missing)")) |>
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "7 = Strongly agree",
    byVar = "disability",
    spanVar = textForSpan,
    footNote <- NULL
  )

```

---

```{r tblDocEasyByDomLangEng}
#| label: doceasy-by-language-dominance-stats-table
#| tbl-cap: "Summary of responses by English-language dominance to finding the documentation easily findable, searchable, and accessible"
#| output: asis

textForSpan <- get_label(visMain$domLangEnglish)
visMain |>
  select(psychopyDocumentationEasy, domLangEnglish)  |>
  mutate(domLangEnglish = forcats::fct_na_value_to_level(domLangEnglish, level = "(missing)")) |>
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "7 = Strongly agree",
    byVar = "domLangEnglish",
    spanVar = textForSpan,
    footNote <- NULL
  )

```


### trust in enforcement

The sections directly below summarise, both visually and verbally, the answer to the following question:

>`r get_label(visMain$trustCodeWillBeEnforced)`

#### everyone

##### figure

```{r figTrustCodeEnforced}
#| warning: false
#| label: trust-enforcement-plot
#| fig-alt: "Barplot of agreement responses to the statement regarding trust in enforcement of the Code of Conduct."

visMain |> 
  select(trustCodeWillBeEnforced) |> 
  ostFreqPlot(
    ostColour = ostYellow,
    sorting = "none"
  )

```

##### table

```{r tblTrustCodeEnforced}
#| label: codeofconduct-stats-table
#| tbl-cap: "Statistics for responses to statements regarding trust in enforcement of the Code of Conduct"
#| output: asis

visMain |>
  select(trustCodeWillBeEnforced) |> 
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "7 = Strongly agree",
    byVar = NULL,
    spanVar = NULL,
    footNote <- NULL
  )

```


<!-- ### [PROVISIONAL REMARKS] -->

<!-- - About two-thirds of the participants were aware of the *Code of Conduct*. I suppose that's to be expected, but it's kinda disappointing, no?\ -->
<!-- - Most of them felt that the documentation was *easily findable, searchable, and accessible*. But there were a few (just under 20%) who disagreed with this in general.\ -->
<!-- - In terms of trust that the *Code of Conduct* would be enforced, there was general agreement here, though about 5% expressed mild disagreement here. About 2% expressed somewhat stronger disagreement. One person expressed the strongest level of disagreement (i.e., *Strongly disagree*). -->

#### interactions

```{r trustCodeLabels}

trustCodeLabel <- get_label(visMain$trustCodeWillBeEnforced)

```


##### gender

###### figure

```{r figTrustCodeEnforcedByGender}
#| label: enforcementtrust-likert-plot-by-gender
#| fig-alt: "Boxplots of responses by EDI dimensions by gender to trust that the Code of Conduct would be enforced." 

legendLabel <- "Gender"
visMain |>
  drop_na(gender) |>
  drop_na(trustCodeWillBeEnforced) |>
  interactionBoxplot(
    xVar = trustCodeWillBeEnforced,
    yVar = gender,
    lowerBound = 1,
    upperBound = 7,
    ostColours = ostColours3,
    xLabel = trustCodeLabel,
    fillLabel = legendLabel,
    tickLabels = likertValues,
    pointFill = "#F7F11C",
    wrapVar = NULL,
    figCaption = "Notes:\n1. A response of 1 indicates 'Strongly disagree'\n2. A response of 7 indicates 'Strongly agree'\n3. The mean is represented by the diamond"
  )

```

###### table

```{r tblTrustCodeEnforcedByGender}
#| label: enforcementtrust-by-gender-stats-table
#| tbl-cap: "Summary of responses by gender to trust that the Code of Conduct would be enforced"
#| output: asis

textForSpan <- get_label(visMain$gender)
visMain |>
  select(trustCodeWillBeEnforced, gender)  |>
  mutate(gender = forcats::fct_na_value_to_level(gender, level = "(missing)")) |>
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "7 = Strongly agree",
    byVar = "gender",
    spanVar = textForSpan,
    footNote <- NULL
  )

```


##### other EDI variables

###### figure

```{r figTrustCodeEnforcedByOtherEDIs}
#| label: enforcementtrust-likert-plot-by-other-edis
#| fig-alt: "Boxplots of responses by EDI dimensions other than gender to trust that the Code of Conduct would be enforced." 

legendLabel <- "Member of\nEDI group"
longerDataSimple |>
  drop_na(trustCodeWillBeEnforced) |>
  drop_na(response) |>
  interactionBoxplot(
    xVar = trustCodeWillBeEnforced,
    yVar = response,
    lowerBound = 1,
    upperBound = 7,
    ostColours = ostColours2rev,
    xLabel = trustCodeLabel,
    fillLabel = legendLabel,
    tickLabels = likertValues,
    pointFill = "#F7F11C",
    wrapVar = ediVar,
    figCaption = "Notes:\n1. A response of 1 indicates 'Strongly disagree'\n2. A response of 7 indicates 'Strongly agree'\n3. The mean is represented by the diamond"
  )

```

###### tables


```{r tblTrustCodeEnforcedBySexuality}
#| label: enforcementtrust-by-sexuality-stats-table
#| tbl-cap: "Summary of responses by sexual orientation to trust that the Code of Conduct would be enforced"
#| output: asis

textForSpan <- get_label(visMain$nonHeteroCommunity)
visMain |>
  select(trustCodeWillBeEnforced, nonHeteroCommunity)  |>
  mutate(nonHeteroCommunity = forcats::fct_na_value_to_level(nonHeteroCommunity, level = "(missing)")) |>
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "7 = Strongly agree",
    byVar = "nonHeteroCommunity",
    spanVar = textForSpan,
    footNote <- NULL
  )

```

---

```{r tblTrustCodeEnforcedByRace}
#| label: enforcementtrust-by-race-stats-table
#| tbl-cap: "Summary of responses by race and/or culture to trust that the Code of Conduct would be enforced"
#| output: asis

textForSpan <- get_label(visMain$raceCulture)
visMain |>
  select(trustCodeWillBeEnforced, raceCulture)  |>
  mutate(raceCulture = forcats::fct_na_value_to_level(raceCulture, level = "(missing)")) |>
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "7 = Strongly agree",
    byVar = "raceCulture",
    spanVar = textForSpan,
    footNote <- NULL
  )

```

---

```{r tblTrustCodeEnforcedByDisability}
#| label: enforcementtrust-by-disability-stats-table
#| tbl-cap: "Summary of responses by disability and/or neurodivergence to trust that the Code of Conduct would be enforced"
#| output: asis

textForSpan <- get_label(visMain$disability)
visMain |>
  select(trustCodeWillBeEnforced, disability)  |>
  mutate(disability = forcats::fct_na_value_to_level(disability, level = "(missing)")) |>
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "7 = Strongly agree",
    byVar = "disability",
    spanVar = textForSpan,
    footNote <- NULL
  )

```

---

```{r tblTrustCodeEnforcedByDomLangEng}
#| label: enforcementtrust-by-domlang-stats-table
#| tbl-cap: "Summary of responses by language dominance in written English to trust that the Code of Conduct would be enforced"
#| output: asis

textForSpan <- get_label(visMain$domLangEnglish)
visMain |>
  select(trustCodeWillBeEnforced, domLangEnglish)  |>
  mutate(domLangEnglish = forcats::fct_na_value_to_level(domLangEnglish, level = "(missing)")) |>
  likertTable(
    lowerBound = "1 = Strongly disagree",
    upperBound = "7 = Strongly agree",
    byVar = "domLangEnglish",
    spanVar = textForSpan,
    footNote <- NULL
  )

```



<!-- # [PROVISIONAL FINAL REMARKS] -->

<!-- ## organizational background -->

<!-- In terms of the background variables, most of the people responding were early-career researchers and frequent users. Most of them interact with the community through helping others on the forum. -->

<!-- *Lack of time* and *not knowing how to start* seem to be the most important deterrents, but certainly not lack of interest or fear of not being welcome in the community. About half of them agreed that workshops would encourage them to contribute more. -->

<!-- ## EDI variables -->

<!-- With respect to equity, diversity, and inclusion, there were several interesting findings. -->

<!-- ### gender -->

<!-- Concerning *gender*, there was an odd finding at first blush. None of the eight people who identified as *neither* a man *nor* a woman indicated that they felt their identity had affected their interactions in the *PsychoPy*<sup>&reg;</sup> community. However, two people who identified as men and two who identified as women did. Note that we did not ask anyone whether they were transgender. Any number of the 4 women and men could have been transgender. -->

<!-- But looking at the issues of *treatment*, *self-regard*, and *isolation*, this group seemed to be in general disagreement with (or neutral about) almost all of the statements. Still, on each question, about 1 out of the 4 seems to indicate some level of agreement. This could be more than one person. -->

<!-- ### sexual orientation -->

<!-- The next category was *sexual orientation*. Here, only $\frac{1}{36}$ indicated that their sexual orientation might have been a problem in the *PsychoPy*<sup>&reg;</sup> community. Still, that one person indicated disagreement with all of the *treatment* and *self-regard* questions. The only question that they weren't in disagreement about was the *isolation* statement, and even there, they were neutral (having selected `4` on the `1`-`7` scale). -->

<!-- ### race and/or culture -->

<!-- Next we come to *race* and/or *culture*. Here, only $\frac{3}{42}$ felt that their identity had affected their interactions with the *PsychoPy*<sup>&reg;</sup> community. -->

<!-- In general however, they were fairly split across the board in terms of how others had treated them. Two exceptions were *negative perception by others*, where two of the three expressed that they had experienced that, and *intentially derisive comments*, where no one expressed agreement with having experienced that. -->

<!-- They were however, (almost) overwhelmingly in agreement with the *self-regard* and *isolation* statements. -->

<!-- They seem to lack confidence, more than anything. -->

<!-- ### disability and/or neurodivergence -->

<!-- With respect to *disability* and/or *neurodivergence*, the highest percentage of all the groups ($\frac{6}{28}$) went on to evaluate the subsequent EDI statements. -->

<!-- This group disagreed more unanimously with the *treatment* statements, with only one of them indicating that (1) there had some any negative perception of them, and (2) that they felt they needed to hide their identity in this regard. -->

<!-- But on the *self-regard* and *isolation* statements, there was general agreement. They seem to lack some self-confidence, along with feeling a little isolated. -->

<!-- ### written-English language dominance -->

<!-- Concerning *written-English language dominance*, of the 82 participants who indicated that their dominant written language is not English, only nine suggested that this might have been a problem in their interactions with the *PsychoPy*<sup>&reg;</sup> community. -->

<!-- Among them, they disagreed in general (but not universally) with the statements regarding poor treatment by others. If there were any statements that raise concern, they are the ones about negative perception and hiding their identity (similar to the other groups). -->

<!-- But unlike the race/culture and disability/neurodivergence groups, this group also expressed little agreement with the *self-regard* statements. This actually makes sense as there's little reason to believe that non-English language dominance should affect one's self-regard. -->

<!-- In their case, the stand-out statement was the one on isolation. The majority of them do feel isolated, quite strongly it seems. -->

<!-- ## environment variables -->

<!-- With respect to the *Code of Conduct* and *documentation*, a sizeable minority was not aware of the existence of the *Code of Conduct*. There was general (but not overwhelming) agreement that the documentation was easily *findable, searchable, and accessible* (*M* = 4.8, *SD* = 1.45, negative skew). There quite  strong agreement that the *Code of Conduct* would be enforced (*M* = 5.4, *SD* = 1.32, strong negative skew with responses stacked increasingly positive). -->

---

# *R* Packages used

```{r citePackages}
#| results: asis

allPackages <- 
  append(
    neededPackages,
    c(
      "grateful", 
      "remotes"
      )
    )

    pkgs <- grateful::cite_packages(
      pkgs = allPackages,
      output = "table", 
      cite.tidyverse = F,
      bib.file = "grateful-refs-sumandvis.bib",
      Rmd.file = "grateful-report-sumandvis.Rmd",
      out.name = "grateful-citations-sumandvis"
      )
    knitr::kable(pkgs)

```

---

# Appendix

## Color-blindness check

The custom palettes used in this report (which are based on the colors used at [Open Science Tools, Ltd.](https://opensciencetools.org/)) are simulated through various forms of color blindness below to ensure that most people can distinguish the colors on the figures.

### two colors

```{r colorblindnessCheckOst2}
#| warning: false

palette_bivariate_plot(ostColours2)
#palette_check(ostColours2)

```

### three colors

```{r colorblindnessCheckOst3}
#| warning: false

palette_bivariate_plot(ostColours3)
#palette_check(ostColours3)

```

### five colors

```{r colorblindnessCheckOst5}
#| warning: false

palette_bivariate_plot(ostColours5)

```

### six colors

```{r colorblindnessCheckOst6}
#| warning: false

palette_bivariate_plot(ostColours6)
#palette_check(ostColours6)

```


